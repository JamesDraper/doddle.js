!function(){var t=function(t,n,e){for(var r=-1,i=function(n,e,i){var o=t.indexOf(i,r);if(-1===o)throw new Error("Unterminated "+n+" block in: "+t);o+=i.length;var m=t.substring(r,o);return r=o,m.substring(e.length,m.length-i.length).trim()},o=0,m=void 0,l='var compiled = "';null!==(m=function(){var n=[["print",e.startPrint],["comment",e.startComment],["logic",e.startLogic]].map(function(n){return[n[0],t.indexOf(n[1],r)]}).filter(function(t){return-1!==t[1]}).sort(function(t,n){return t[1]>n[1]});return 0===n.length?null:(r=n[0][1],n[0][0])}());)l+=t.substring(o,r).replace(/\r?\n|\r/g,"\\n"),"print"===m&&(l+='" + '+i("print",e.startPrint,e.endPrint)+' + "'),"comment"===m&&i("comment",e.startComment,e.endComment),"logic"===m&&(l+='";',l+=i("logic",e.startLogic,e.endLogic),l+='compiled += "'),o=r;l+=t.substring(r).replace(/\r?\n|\r/g,"\\n")+'";',l+="return compiled;",!0===n&&(console.log("Template compiled"),console.log(l)),this.render=new Function("vars",l)},n=function(n){var e={startPrintDelimiter:"{{",endPrintDelimiter:"}}",startCommentDelimiter:"{#",endCommentDelimiter:"#}",startLogicDelimiter:"{%",endLogicDelimiter:"%}",debug:!1},r=function(t){var n={};for(var r in e)n[r]=void 0!==t[r]?t[r]:e[r];return{debug:n.debug,delimiters:{startPrint:n.startPrintDelimiter,endPrint:n.endPrintDelimiter,startComment:n.startCommentDelimiter,endComment:n.endCommentDelimiter,startLogic:n.startLogicDelimiter,endLogic:n.endLogicDelimiter}}}(n),i={},o=function(t){var n=document.getElementsByTagName("script");for(var e in n)if("text/doddle-template"===n[e].type&&n[e].id===t)return n[e];throw new Error("Could not find template: "+t+".")};this.fromString=function(n,e,o){var m="str:"+e;void 0===i[m]&&(i[m]=new t(e,r.debug,r.delimiters)),n.innerHTML=i[m].render(o)},this.fromTemplate=function(n,e,m){var l="tpl:"+e;void 0===i[l]&&(i[l]=new t(o(e).innerHTML,r.debug,r.delimiters)),n.innerHTML=i[l].render(m)}},e=function(){var t={},e=function(e){var r=JSON.stringify(e);return void 0===t[r]&&(t[r]=new n(e)),t[r]};this.fromString=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e(i).fromString(t,n,r)},this.fromTemplate=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e(i).fromTemplate(t,n,r)}};doddle=new e}();